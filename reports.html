<!DOCTYPE html>
<html>
<head>
<title>Reports</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Segoe UI;background:#0b0f14;color:white;}
header{text-align:center;padding:15px;color:#f9c74f;}
.box{
 margin:15px;
 padding:20px;
 background:rgba(255,255,255,.08);
 backdrop-filter:blur(12px);
 border-radius:16px;
}
button{
 width:100%;
 padding:12px;
 border:none;
 border-radius:8px;
 background:linear-gradient(135deg,#f9c74f,#f9844a);
 font-weight:bold;
}
.record{
 margin-top:10px;
 padding:12px;
 background:rgba(255,255,255,.06);
 border-radius:12px;
}
</style>
</head>

<body>

<header>ðŸ“Š Monthly Billing Report</header>

<div class="box">
 <button onclick="generate()">Generate Report</button>
 <div id="out"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore,collection,getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const app=initializeApp({apiKey:"AIzaSyC4lH4ViCEhQbvNt6nLXmfR-AhAa1-b6Bk",projectId:"pgdairy-63765"});
const db=getFirestore(app);

window.generate=async()=>{
 let p1=0,p2=0,p3=0;
 (await getDocs(collection(db,"milk"))).forEach(d=>{
  let day=new Date(d.data().date).getDate();
  if(day<=10)p1+=d.data().income;
  else if(day<=20)p2+=d.data().income;
  else p3+=d.data().income;
 });
 out.innerHTML=`
  <div class="record">1â€“10 : â‚¹${p1}</div>
  <div class="record">11â€“20 : â‚¹${p2}</div>
  <div class="record">21â€“End : â‚¹${p3}</div>
  <div class="record"><b>Total : â‚¹${p1+p2+p3}</b></div>
 `;
};
</script>

</body>
</html>
