<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
 margin:0;
 font-family:Segoe UI;
 background:#0b0f14;
 color:white;
}
header{
 padding:20px;
 text-align:center;
 background:#111827;
 font-size:22px;
 color:#f9c74f;
}
.grid{
 display:grid;
 grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
 gap:15px;
 padding:20px;
}
.card{
 background:rgba(255,255,255,0.08);
 backdrop-filter:blur(12px);
 border-radius:16px;
 padding:20px;
 text-align:center;
 box-shadow:0 10px 30px rgba(0,0,0,.6);
}
.value{
 font-size:26px;
 font-weight:bold;
 color:#f9c74f;
}
</style>
</head>

<body>

<header>üêÑ PG Dairy ‚Äì Dashboard</header>

<div class="grid">
 <div class="card">Cows<div class="value" id="cows">0</div></div>
 <div class="card">Milk Income<div class="value">‚Çπ<span id="income">0</span></div></div>
 <div class="card">Expenses<div class="value">‚Çπ<span id="expense">0</span></div></div>
 <div class="card">Profit<div class="value">‚Çπ<span id="profit">0</span></div></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore,collection,getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
import { getAuth,onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

const app=initializeApp({
 apiKey:"AIzaSyC4lH4ViCEhQbvNt6nLXmfR-AhAa1-b6Bk",
 projectId:"pgdairy-63765"
});
const db=getFirestore(app);
const auth=getAuth(app);

onAuthStateChanged(auth,async u=>{
 if(!u)location.href="login.html";
 cows.innerText=(await getDocs(collection(db,"cows"))).size;
 let inc=0,exp=0;
 (await getDocs(collection(db,"milk"))).forEach(d=>inc+=d.data().income);
 (await getDocs(collection(db,"expenses"))).forEach(d=>exp+=d.data().amount);
 income.innerText=inc;
 expense.innerText=exp;
 profit.innerText=inc-exp;
});
</script>

</body>
</html>
